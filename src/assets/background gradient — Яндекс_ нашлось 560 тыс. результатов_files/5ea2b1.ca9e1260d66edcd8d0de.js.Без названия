(window.webpackJsonp=window.webpackJsonp||[]).push([["5ea2b1"],{QDhz:function(t,e,i){"use strict";i.r(e),i.d(e,"JustifiedGallery",(function(){return c}));var n=i("mrSG"),r=i("cDcd"),s=i.n(r),u=i("WvKr"),o=i("NKkm"),h=i("0jHf"),a=i("TvKp"),c=function(t){function e(e){var i=t.call(this,e)||this;i.container=s.a.createRef(),i.plainThumbs=[],i.clientJustified=!1,i.justifyDebounced=Object(o.a)(i.safeJustifyThumbs.bind(i),100);var n=i.props,r=n.thumbs,u=n.justifierConfig;if(!r||!u)return i;var h=[];return r.forEach((function(t){return t.forEach((function(t){t.lazy&&(t.lazy=!1),i.plainThumbs.push(t),h.push({width:t.origWidth||t.width||0})}))})),i.state={sizes:h,currentWidth:u.rowWidth},i}return Object(n.__extends)(e,t),e.prototype.componentDidMount=function(){window.addEventListener("resize",this.justifyDebounced),window.addEventListener("orientationchange",this.justifyDebounced),Object(h.a)().on("content:right:resize",this.justifyDebounced),this.isNeedFirstReDraw()&&this.safeJustifyThumbs()},e.prototype.componentWillUnmount=function(){window.removeEventListener("resize",this.justifyDebounced),window.removeEventListener("orientationchange",this.justifyDebounced),Object(h.a)().off("content:right:resize",this.justifyDebounced)},e.prototype.isNeedFirstReDraw=function(){var t=this.container.current;if(!t)return!1;var e=this.state.currentWidth-t.clientWidth;return e<0||e>=20},e.prototype.safeJustifyThumbs=function(){this.justifyThumbs().catch((function(){}))},e.prototype.justifyThumbs=function(){return Object(n.__awaiter)(this,void 0,void 0,(function(){var t,e,r,s,u,o;return Object(n.__generator)(this,(function(n){switch(n.label){case 0:return t=this.props.justifierConfig,e=this.container.current,t&&e?(r=e.clientWidth,this.state.currentWidth===r?[2]:[4,i.e("8486a5").then(i.t.bind(null,"ljQ7",7))]):[2];case 1:return s=n.sent().justifyItemsByWidth,u=this.plainThumbs.map((function(t){return{width:t.origWidth||t.width||0}})),t.rowWidth=r,o=s(u,t).fittedItems,this.clientJustified=!0,this.setState({sizes:o,currentWidth:r}),[2]}}))}))},e.prototype.getGalleryThumbs=function(){var t=this,e=this.props,i=e.thumbs,n=e.thumbCreator;if(!n||!this.state.currentWidth)return[];if((!this.container.current||!this.clientJustified)&&i)return i.map((function(t){return t.map((function(t){return n(t)}))}));var r=this.state.sizes,s=this.props.justifierConfig.rowsNumber||0,u=[[]];return r.forEach((function(e,i){var o=t.plainThumbs[i];o.width=e.newWidth||e.width,u[u.length-1].push(n(o)),e.isLast&&u.length<s&&i<r.length-1&&u.push([])})),u},e.prototype.render=function(){var t=this;return s.a.createElement(u.ComponentRegistryConsumer,{id:Object(a.a)()},(function(e){var i=e.Gallery;return s.a.createElement(i,Object(n.__assign)({},t.props.gallery,{forwardRef:t.container,lazy:!1}),t.getGalleryThumbs())}))},e}(s.a.PureComponent)}}]);