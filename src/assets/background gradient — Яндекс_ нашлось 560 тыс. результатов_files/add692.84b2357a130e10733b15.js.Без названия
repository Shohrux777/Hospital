(window.webpackJsonp=window.webpackJsonp||[]).push([["add692"],{HO6j:function(t,e,o){"use strict";o.r(e),o.d(e,"RelatedAbove",(function(){return M}));var n=o("mrSG"),r=o("cDcd"),i=o.n(r),a=o("faye"),s=o.n(a),c=o("0jHf"),l=o("rKag"),u=o("3nHn"),p=o("YD0/"),d=o("vzuF"),h=o("bRqj"),m=o("Ttnq"),f=o("I1dp"),v=o("Fb4d"),b=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(n.__extends)(e,t),e.prototype.componentDidMount=function(){var t=this.props.onMount;t&&t()},e}(i.a.PureComponent),y=o("Dps+"),R=(Object(y.cn)("RelatedAboveRoot")(),Object(y.cn)("RelatedAbove")),w=(R(),R("Wrap")),S=R("Item"),g=Object(l.compose)(m.a,f.a)(h.a),A=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(n.__extends)(e,t),e.prototype.render=function(){var t=this.props,e=t.rootRef,o=t.scrollerRef,n=t.items,r=t.baseUrl,a=t.query,s=t.isWide,c=R({wide:s});return i.a.createElement("div",{ref:e,className:c},i.a.createElement(p.a,{containerRef:o,withShadowSafer:!0,hasArrows:!0,hideArrowLine:!0,arrowsTheme:"easeShadow"},i.a.createElement("div",{className:w,role:"presentation"},n.map((function(t,e){var o=t.text,n=t.src,s=t.entity;return i.a.createElement(p.b,{key:o},(function(t){var c=t.className;return i.a.createElement("div",{className:S+" "+c,role:"listitem"},i.a.createElement(g,{index:e,text:(null==s?void 0:s.title)||Object(d.b)(o,a),url:Object(d.a)(r,o,n,null==s?void 0:s.ento),hint:null==s?void 0:s.subtitle,withHint:Boolean(null==s?void 0:s.subtitle),thumbUrl:null==s?void 0:s.image,withThumb:Boolean(null==s?void 0:s.image)}))}))})))))},e}(b),E=Object(u.withBaobab)({name:"shiny_discovery_above"},Object(v.a)("related-above-show",A)),j=o("NKkm"),M=function(t){function e(e){var o=t.call(this,e)||this;return o.state={root:null,isShowAllowed:!0},o.topRoot=null,o.contentRoot=null,o.scrollerContentWidth=-1,o.onFirstSuccessSerpRequest=o.onFirstSuccessSerpRequest.bind(o),o.onBeforeAjaxSerpRequest=o.onBeforeAjaxSerpRequest.bind(o),o}return Object(n.__extends)(e,t),e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this),window.BEM.channel("ajax").onFirst("successCallbacksFinished",this.onFirstSuccessSerpRequest),window.BEM.channel("ajax").onFirst("ajaxAction",this.onBeforeAjaxSerpRequest),this.topRoot=document.querySelector("[data-related-above-place=top]"),this.contentRoot=document.querySelector("[data-related-above-place=content]")},e.prototype.componentWillUnmount=function(){t.prototype.componentWillUnmount.call(this),window.BEM.channel("ajax").un("successCallbacksFinished",this.onFirstSuccessSerpRequest),window.BEM.channel("ajax").un("ajaxAction",this.onBeforeAjaxSerpRequest)},e.prototype.onFirstSuccessSerpRequest=function(){this.setState({isShowAllowed:!1})},e.prototype.onBeforeAjaxSerpRequest=function(){this.scrollWatcher.deactivate()},e.prototype.isMeasuringRoot=function(){return this.state.root!==this.topRoot&&this.state.root!==this.contentRoot},e.prototype.measureWidth=function(){this.scrollerContentWidth=this.scrollerRef.current.offsetWidth},e.prototype.applyNegativeMarginsCompensation=function(t){var e=document.querySelector("[data-related-above-offset=top]"),o=document.querySelector("[data-related-above-offset=center]");if(e&&o){var n=e.offsetTop-o.offsetTop;this.props.thresholdForNegativeMarginsCompensation&&n<this.props.thresholdForNegativeMarginsCompensation&&(t.style.paddingBottom=this.props.thresholdForNegativeMarginsCompensation-n+"px")}},e.prototype.getActualRoot=function(){var t;return this.scrollerContentWidth>((null===(t=this.contentRoot)||void 0===t?void 0:t.offsetWidth)||0)?this.topRoot:this.contentRoot},e.prototype.processAnimationStart=function(){var e=this.state.root,o=this.rootRef.current;e===this.topRoot&&o&&this.applyNegativeMarginsCompensation(o),t.prototype.processAnimationStart.call(this)},e.prototype.onShow=function(){if(!this.scrollerRef.current){var t=document.createElement("div");t.style.visibility="hidden",t.style.position="absolute",t.style.left="0",t.style.top="-1024px",document.body.appendChild(t),this.setState({root:t})}},e.prototype.onMount=function(){this.isMeasuringRoot()?(this.measureWidth(),this.setState({root:this.getActualRoot()})):(this.processAnimationStart(),Object(c.a)().emit("related:present"))},e.prototype.render=function(){var t=this.state,e=t.isShowAllowed,o=t.root;if(!e||!o)return null;var n=this.props,r=n.items,a=n.query,c=n.baseUrl;return s.a.createPortal(i.a.createElement(E,{logNode:this.isMeasuringRoot()?{name:"$ignore"}:void 0,items:r,query:a,baseUrl:c,rootRef:this.rootRef,scrollerRef:this.scrollerRef,isWide:o===this.topRoot,onMount:this.onMount}),o)},e}(function(t){function e(e){var o=t.call(this,e)||this;return o.rootRef=i.a.createRef(),o.scrollerRef=i.a.createRef(),o.animationEndCallback=Object(j.a)((function(){var t,e;document.body.classList.remove("RelatedAboveAnimation_progress_yes"),null===(t=o.rootRef.current)||void 0===t||t.removeEventListener("animationend",o.animationEndCallback),"function"==typeof Event?e=new Event("resize"):(e=document.createEvent("Event")).initEvent("resize",!0,!0),window.dispatchEvent(e),window.BEM.channel("related-above").trigger("was_shown")}),300),o.scrollWatcher=e.scrollWatcher,o.onShow=o.onShow.bind(o),o.onMount=o.onMount.bind(o),o}return Object(n.__extends)(e,t),e.prototype.componentDidMount=function(){this.scrollWatcher.registerActionCallback(this.onShow)},e.prototype.componentWillUnmount=function(){this.scrollWatcher.unregisterActionCallback(),this.abortAnimation()},e.prototype.processAnimationStart=function(){var t=this;requestAnimationFrame((function(){var e=t.rootRef.current;e&&(window.BEM.channel("related-above").trigger("animation_start"),document.body.classList.add("RelatedAboveAnimation_progress_yes"),e.addEventListener("animationend",t.animationEndCallback),window.BEM.channel("main").trigger("resize"))}))},e.prototype.abortAnimation=function(){var t;document.body.classList.remove("RelatedAboveAnimation_progress_yes"),null===(t=this.rootRef.current)||void 0===t||t.removeEventListener("animationend",this.animationEndCallback)},e}(i.a.PureComponent))}}]);